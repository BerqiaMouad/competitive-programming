/*
                                                                                    
                                                  ████                              
                                                ██▓▓██                              
                                              ▒▒▓▓▒▒██                              
                              ██            ██▒▒▒▒▒▒██                              
                              ██          ▒▒▓▓▒▒▒▒▓▓██                              
                              ██▓▓      ▓▓▓▓▒▒▒▒▒▒████                              
                            ██▒▒██    ██▒▒▒▒▒▒▒▒██████        ██████████            
                            ██▒▒▒▒██  ██▒▒▒▒▒▒▒▒██████  ██████▒▒▒▒▒▒████            
                            ██▒▒▒▒████▒▒▒▒▒▒▒▒██████████▒▒▒▒▒▒▒▒████████            
                            ██▒▒▒▒████▒▒▒▒▒▒▒▒████████▓▓▒▒▒▒▒▒▓▓██████              
                          ▒▒▓▓▒▒▒▒████▒▒▒▒▒▒▓▓██████▓▓▒▒▒▒▓▓▓▓████████              
                          ██▒▒▒▒▒▒████▒▒▒▒████████████▓▓████████████                
                  ▓▓      ██▒▒▒▒▒▒████▒▒████████████████████████████                
                  ██▓▓    ██▒▒▒▒▓▓████████████████▓▓████████████████▓▓              
                  ██▓▓▓▓▓▓▓▓▒▒▒▒████████████▓▓▒▒▓▓████████████████████▓▓▓▓          
                  ██▒▒▓▓██▒▒▒▒▒▒██████████▒▒▒▒▒▒██████████████████████████▒▒▓▓      
                  ██▒▒▒▒▒▒▒▒▒▒▒▒██████████▒▒██████████████▓▓▓▓██████████████        
                    ██▒▒▒▒██▒▒▒▒████████▓▓██████████████▓▓████████████████          
                    ██▒▒▒▒████▒▒████████████████████████████████████████            
                      ██▒▒████████▓▓██████████████████████████████████              
                  ▓▓▓▓████▓▓████▒▒░░██████████▒▒██████████████████████▓▓            
                    ████████████▒▒░░░░██████▓▓▒▒▒▒██████▒▒████████████              
                      ████████████░░░░  ▒▒██▓▓▒▒▒▒████▒▒▒▒██████████                
                        ██████████░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒██████████                  
                        ██████████░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒████████████                
                          ████████▒▒░░░░░░░░░░░░  ▒▒▒▒██▒▒████████                  
                          ██░░████▓▓▒▒    ░░░░░░  ▒▒▓▓██▒▒▓▓████░░                  
                          ██░░▒▒██▒▒▒▒▓▓▓▓▓▓▒▒▒▒▓▓▓▓████▒▒▒▒██                      
                          ██░░▒▒░░▒▒  ████▒▒▒▒▒▒▓▓██████▒▒▒▒██                      
                            ██░░    ▒▒████▒▒░░░░░░██▓▓██▒▒▒▒██                      
                              ▓▓▒▒░░░░░░░░░░░░░░░░████▒▒▒▒▓▓████▓▓                  
                                ██░░░░░░░░░░░░░░▒▒▒▒▒▒████  ░░░░░░██                
                              ▒▒▒▒▓▓░░░░░░░░░░░░▒▒▒▒▓▓░░░░░░░░░░  ▒▒▒▒              
                              ██▒▒▒▒▓▓▒▒░░  ▓▓▓▓▓▓▒▒██░░░░░░░░░░░░▒▒▒▒▓▓            
                              ██▒▒▒▒░░▓▓▓▓▒▒░░░░▒▒▓▓░░░░░░░░░░░░▒▒▒▒▒▒██            
              ▓▓██▓▓          ██▒▒▒▒  ░░▓▓▓▓▓▓▓▓▓▓██░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▓▓          
            ▓▓▒▒▒▒▒▒▓▓          ▓▓▒▒░░░░██▓▓▓▓▓▓████  ░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒██          
    ▓▓▓▓▓▓▓▓██▓▓▓▓▒▒▒▒▓▓          ██    ██▓▓▒▒▓▓▓▓██▒▒▒▒░░░░░░▒▒▒▒▒▒▒▒▒▒██          
    ██░░░░░░░░██▓▓▒▒▒▒██▓▓▓▓▓▓▓▓▓▓██░░  ██▓▓▒▒▒▒▓▓██▒▒░░░░░░░░▒▒▒▒▓▓▓▓▓▓▒▒▓▓        
      ▓▓▓▓▓▓░░░░░░░░░░░░██▒▒▒▒▒▒▒▒██  ░░░░██▒▒▒▒██▒▒░░░░░░░░░░▒▒▒▒▓▓▓▓██▒▒▒▒▓▓      
░░██▓▓████▒▒▒▒  ░░  ░░░░░░██▒▒▒▒▒▒▒▒▓▓  ░░░░▒▒▒▒██░░  ░░░░░░░░▒▒▓▓▓▓▓▓▓▓▒▒▒▒██      
░░██  ░░░░░░░░░░░░░░░░░░░░▒▒████▒▒▒▒██  ░░░░  ██  ░░░░░░░░░░░░██▓▓▓▓▓▓▒▒▒▒▒▒██      
    ▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░░░██████▓▓▓▓▓▓████░░░░░░░░░░░░░░██▓▓▓▓▒▒▒▒▒▒▒▒██▓▓    
        ██▓▓▒▒▒▒  ░░░░▒▒▒▒░░░░░░░░░░░░░░░░░░▒▒▒▒░░░░░░  ░░░░▒▒▓▓████▒▒▒▒▒▒▒▒██▒▒▓▓  
          ██▒▒▒▒░░░░░░▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░▒▒  ░░░░░░▒▒▒▒▒▒████▒▒██▒▒▒▒▒▒██▒▒██  
            ██████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒██▒▒▒▒▒▒██████▒▒▒▒▒▒██
                ░░  ░░░░      ████░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██
          ░░  ░░░░░░░░░░░░░░░░    ████░░░░  ░░░░░░░░░░░░▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██
            ░░░░░░░░░░░░░░░░░░░░░░  ░░██▒▒░░░░░░░░░░░░░░▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░  
              ░░░░░░░░░░░░░░░░░░░░░░░░██████▒▒▒▒▒▒▒▒░░░░██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒      
                  ░░░░░░░░░░░░░░░░░░██  ░░  ██████▒▒░░░░██▒▒    ▒▒▒▒▒▒▒▒▒▒          
                        ░░░░░░░░░░░░██    ░░░░    ██████▒▒▒▒▒▒▒▒                    
                            ░░░░▓▓▓▓██            ░░░░░░▒▒▒▒▒▒░░            
*/


#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
#define all(c) c.begin(), c.end()


int main(){
	ios_base::sync_with_stdio(0);
	cin.tie(0);

	#ifndef ONLINE_JUDGE

	freopen("in.txt", "r", stdin);

	#endif


	ll t; cin >> t;
	while(t--){
		ll n; cin >> n;
		vector<ll> a(n);
		vector<ll> inc(n);
		vector<ll> dec(n);

		for(int i = 0; i< n; i++){
			cin >> a[i];
			inc[i] = dec[i] = a[i];
		}
		
		sort(all(inc));
		sort(all(dec), greater<ll>());

		bool ok = true;
		bool okk = true;

		for(int i = 0; i< n;i++){
			ok &= (a[i] == inc[i]);
			okk &= (a[i] == dec[i]);
		}

		if(ok)
			cout << "0\n";
		else if(okk)
			cout << a[0] << "\n";
		else{
			ll x = 0;
			bool yes = true;
			for(int i = 0; i< n - 1; i++){
				if(a[i] > a[i + 1])x = max(x, (a[i] + a[i +1] + 1) / 2LL);
			}
			for(int i = 0; i< n - 1; i++){
				if(abs(a[i] - x) > abs(a[i+1] - x)){
					yes = false; break;
				}
			}
			if(yes)
				cout << x << "\n";
			else
				cout << "-1\n";
		}

	}

	return 0;
}